filegroup(
    name = "everything_x",
    srcs = glob([
        "**/*",
    ]),
)

genrule(
    name = "build_caca",
    srcs = [":everything_x"],
    cmd = "cd external/some_shitty_lib && ./bootstrap && ./configure && make 2> /dev/null && cp cxx/caca++.o $@",
    outs = ["caca++.o"],
)

cc_library(
    name = "some_shitty_lib",
    data = [":build_caca"],
    visibility = ["//visibility:public"],
)
