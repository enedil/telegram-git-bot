filegroup(
    name = "everything_x",
    srcs = glob([
        "**/*",
    ]),
)

genrule(
    name = "build_seastar",
    srcs = [":everything_x"],
    cmd = "cd external/seastar_repository && ./configure.py --mode=release && ninja-build -C build/release/ seastar && cp build/release/libseastar.a ../../$@",
    outs = ["libseastar.a"],
)

cc_library(
    name = "seastar_lib",
    data = [":build_seastar"],
    visibility = ["//visibility:public"],
)
